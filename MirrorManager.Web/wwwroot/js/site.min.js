function hasGetUserMedia(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)}hasGetUserMedia()||alert("getUserMedia() is not supported in your browser");window.addEventListener("DOMContentLoaded",function(){function f(){$("#upload").attr("disabled","disabled");$("#upload").attr("value","Uploading...");var n=t.toDataURL("image/jpeg",.9).split(",")[1];$.ajax({url:"Home/Upload",type:"POST",data:JSON.stringify({image:n,test:"test"}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){alert(JSON.stringify(n));$("#upload").removeAttr("disabled");$("#upload").attr("value","Upload")},error:function(){alert("There was some error while uploading Image");$("#upload").removeAttr("disabled");$("#upload").attr("value","Upload")}})}var t=document.getElementById("canvas"),u=t.getContext("2d"),n=document.getElementById("video"),i={video:!0},r=function(n){console.log("Video capture error: ",n.code)};navigator.getUserMedia?navigator.getUserMedia(i,function(t){n.src=t;n.play()},r):navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia(i,function(t){n.src=window.webkitURL.createObjectURL(t);n.play()},r);document.getElementById("snap").addEventListener("click",function(){u.drawImage(n,0,0,640,480)});document.getElementById("upload").addEventListener("click",function(){f()})},!1);